<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="ploneboard">

<head>
    <metal:css fill-slot="css_slot">
    <style type="text/css" media="all"
           tal:content="string: @import url($portal_url/ploneboard.css);"></style>
    </metal:css>
</head>
      
<body>

    <div metal:fill-slot="main"
         tal:define="forums here/getForums">

        <metal:header use-macro="here/board_header/macros/header">Board header</metal:header>

        <div class="discreet"
             tal:condition="not: forums" i18n:translate="not_foruns">
        No Forums exist in this Board yet, use the add menu to add forums.
        </div>
        
        <table class="listing"
               tal:condition="forums">
        

            <thead>
                <tr>
                    <th i18n:translate="forum_name">Forum name</th>
                    <th i18n:translate="most_recent_post">Most recent post</th>
                    <th i18n:translate="status">Status</th>
                </tr>
            </thead>

            <tbody>
                <tal:showforums tal:repeat="forum forums">
    
                    <tr tal:define="oddrow repeat/forum/odd;"
                        tal:attributes="class python:test(oddrow, 'even', 'odd')">

                        <td>      
                            <a href=""
                               class="listingForum"
                               tal:attributes="href forum/absolute_url">
                                    <span tal:replace="forum/Title">This is a title</span>
    
                                    <span class="discreet" tal:content="forum/Description">
                                    This is the Board Description
                                    </span>
                            </a>
                        </td>

                        <tal:choice1 condition="python:checkPermission('Ploneboard: View', forum)">    
                        <!-- 
                            This should show "Thursday 13:56" if in this week, "Aug 13. 2003" 
                            if older than this week. (limi)
                        -->
                        <td i18n:translate="no_conversations_started" tal:condition="not: forum/getLastCommentAuthor">
                            <span class="discreet">No conversations started</span>
                        </td>

                        <td tal:condition="forum/getLastCommentAuthor">
                            
                            <div i18n:translate="label_by_author">
                                by <tal:author i18n:name="author"
                                tal:content="forum/getLastCommentAuthor" />
                           </div>
                                                                                                                              

                            <span class="discreet"
                                  tal:content="python:here.toPloneboardTime(forum.getLastCommentDate())">
                                Thursday 13:21
                            </span>
                        </td>
                        </tal:choice1>

                        <tal:choice2 condition="not: python:checkPermission('Ploneboard: View', forum)">    
                        <td>
                            <span class="discreet" style="text-align:center;">Private</span>
                        </td>
                        </tal:choice2>
    
                        <td tal:define="revstate python:wtool.getInfoFor(forum, 'review_state')"
                            tal:content="string:$revstate"
                            style="text-align:center;">
                            _review_state_
                        </td>

                    </tr>
    
                </tal:showforums>

            </tbody>
        </table>            

    <metal:footer use-macro="here/board_footer/macros/footer">Board footer</metal:footer>

    </div>
                     
</body>
</html>

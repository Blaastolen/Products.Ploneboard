<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="ploneboard">

<head>
    <metal:css fill-slot="css_slot">
    <style type="text/css" media="all"
           tal:content="string: @import url($portal_url/ploneboard.css);"></style>
    </metal:css>
</head>
      
<body>

    <div metal:fill-slot="main">

        <metal:header use-macro="here/board_header/macros/header">Board header</metal:header>

        <div class="documentDescription"
             tal:content="here/Description"> 
           description
        </div>
        
        <table class="listing">
        

            <thead>
                <tr>
                    <th>Forum name</th>
                    <th>Most recent post</th>
                </tr>
            </thead>

            <tbody>
                <tal:showforums tal:define="forums here/getForums"
                                tal:repeat="forum forums">
    
                    <tr tal:define="oddrow repeat/forum/odd;"
                        tal:attributes="class python:test(oddrow, 'even', 'odd')">

                        <td>      
                            <a href=""
                               class="listingForum"
                               tal:attributes="href forum/absolute_url">
                                    <span tal:replace="forum/Title">This is a title</span>
    
                                    <span class="discreet" tal:content="forum/Description">
                                    This is the Board Description
                                    </span>
                            </a>
                        </td>
    
                        <!-- 
                            This should show "Thursday 13:56" if in this week, "Aug 13. 2003" 
                            if older than this week. (limi)
                        -->
                        <td tal:condition="not: forum/getLastMessageAuthor">
                            <span class="discreet">No conversations started yet</span>
                        </td>
                        <td tal:condition="forum/getLastMessageAuthor">
                            <span>
                                by <span tal:replace="forum/getLastMessageAuthor">last author</span>
                            </span>

                            <span class="discreet"
                                  tal:content="python:here.toPloneboardTime(forum.getLastMessageDate())">
                                Thursday 13:21
                            </span>
                        </td>
    
                    </tr>
    
                </tal:showforums>

            </tbody>
        </table>            
    
    <div class="documentByLine">
    Ploneboard by <a class="link-plain" href="http://www.plonesolutions.com/ploneboard">Plone Solutions</a>
    </div>

    </div>
                     
</body>
</html>

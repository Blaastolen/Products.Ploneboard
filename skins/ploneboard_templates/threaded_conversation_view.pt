<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="ploneboard">
      
<head>
    <metal:css fill-slot="css_slot">
        <style type="text/css" media="all"
               tal:content="string: @import url($portal_url/ploneboard.css);"></style>
    </metal:css>

    <metal:js fill-slot="javascript_head_slot">

      <tal:block condition="python:checkPermission('Ploneboard: Approve Comment', here)">
        <script type="text/javascript" src="" tal:attributes="src here/vcXMLRPC.js/absolute_url"></script>
        <script type="text/javascript" src="" tal:attributes="src here/moderation.js/absolute_url"></script>
      </tal:block>

    </metal:js>

</head>

<body>

   <div metal:fill-slot="main">

        <metal:header use-macro="here/board_header/macros/header">Board header</metal:header>

        <h2>
        <img src="" tal:replace="structure here/ploneboard_conversation_icon.gif" />
        <img src="" tal:condition="python:wf_state in ['locked', 'locked_and_sticky']"
                    tal:replace="structure here/lock_icon.gif" />
        <span tal:replace="here/Title">Conversation title</span>
        </h2>

        <div class="documentDescription"
             tal:content="here/Description"> 
        description
        </div>

        <div class="boardConversation"
             metal:define-macro="view_comments"
             tal:define="comments here/getRootComments;
                         children comments">

            <ul>
                <tal:node metal:define-macro="displaynode">
                    <li tal:repeat="comment children">
                        <div class="boardComment visualIEFloatFix">

                        <metal:comment metal:use-macro="here/comment_view/macros/comment" />

                        <tal:children define="children comment/childIds|nothing"
                                      condition="children">
                          <tal:block define="children python:[getattr(here, x) for x in children]">

                            <ul>
                                <div metal:use-macro="here/threaded_conversation_view/macros/displaynode" />
                            </ul>
                          </tal:block>
                        </tal:children>
                    </li>
                </tal:node>
            </ul>
        </div>

        <metal:block use-macro="here/conversation_view/macros/quickreply">Quick reply form</metal:block>

        <metal:footer use-macro="here/board_footer/macros/footer">Board footer</metal:footer>

    </div>
                     
</body>
</html>
